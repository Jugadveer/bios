<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nex Mentor Integration Example</title>
    <link rel="stylesheet" href="/static/css/nex_mentor.css">
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            max-width: 800px;
            margin: 50px auto;
            padding: 20px;
            background: #f5f5f5;
        }
        .example-container {
            background: white;
            padding: 30px;
            border-radius: 12px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .mentor-response {
            margin-top: 30px;
        }
        .loading {
            text-align: center;
            padding: 20px;
            color: #666;
        }
    </style>
</head>
<body>
    <div class="example-container">
        <h1>Nex Mentor Integration Example</h1>
        
        <div>
            <h3>Test Parameters</h3>
            <label>Lesson ID: <input type="text" id="lessonId" value="investing_basics_01" style="width: 200px;"></label><br><br>
            <label>Demo Balance: <input type="number" id="demoBalance" value="50000" style="width: 200px;"></label><br><br>
            <label>Action: 
                <select id="action" style="width: 200px;">
                    <option value="explain">Explain</option>
                    <option value="quiz">Quiz</option>
                    <option value="summarize">Summarize</option>
                    <option value="next_steps">Next Steps</option>
                </select>
            </label><br><br>
            <button onclick="callNexMentor()" style="padding: 12px 24px; background: #ff6b35; color: white; border: none; border-radius: 8px; cursor: pointer; font-size: 16px;">
                Ask Nex
            </button>
        </div>

        <div id="mentorResponse" class="mentor-response"></div>
    </div>

    <script src="/static/js/nex_mentor.js"></script>
    <script>
        async function callNexMentor() {
            const lessonId = document.getElementById('lessonId').value;
            const demoBalance = parseInt(document.getElementById('demoBalance').value);
            const action = document.getElementById('action').value;
            const container = document.getElementById('mentorResponse');

            // Show loading
            container.innerHTML = '<div class="loading">Nex is thinking... ðŸ¤”</div>';

            try {
                const response = await window.nexMentor.explain({
                    lessonId: lessonId,
                    action: action,
                    pageType: 'course',
                    userContext: {
                        user_id: 'demo_user',
                        demo_balance: demoBalance,
                        progress: 0.35,
                        confidence_level: 'low'
                    },
                    requestedDepth: 'medium',
                    allowWebFetch: true,
                    sources: [],
                    userMessage: 'Explain this concept'
                });

                // Render response
                window.nexMentor.renderResponse(response, container);

                // Add disclaimer
                const disclaimer = document.createElement('div');
                disclaimer.className = 'mentor-disclaimer';
                disclaimer.textContent = 'This is educational demo content â€” not financial advice.';
                container.appendChild(disclaimer);

            } catch (error) {
                container.innerHTML = `<div style="color: red;">Error: ${error.message}</div>`;
                console.error('Error:', error);
            }
        }
    </script>
</body>
</html>

